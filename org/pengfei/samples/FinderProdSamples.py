from org.pengfei.entity_search.EntityFinder import EntityFinder

atlas_hostname = "http://atlas.lab.sspcloud.fr"
atlas_port = 80
oidc_token = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhUHNCSzhYRC1od1gtMWJFbjdZZDRLS0tWS0hYRy03RHg3STZDaVZZWUtRIn0.eyJleHAiOjE2MDI5MDE4NTYsImlhdCI6MTYwMjg1ODY1NywiYXV0aF90aW1lIjoxNjAyODU4NjU2LCJqdGkiOiJjODVlZjFkZS0yOTE3LTRmMWItOTBjMC0yODAwNDM0ODE1M2IiLCJpc3MiOiJodHRwczovL2F1dGgubGFiLnNzcGNsb3VkLmZyL2F1dGgvcmVhbG1zL3NzcGNsb3VkIiwiYXVkIjpbIm9ueXhpYSIsImFjY291bnQiXSwic3ViIjoiNDczNDkxMjgtNGE0Yy00MjI2LWE1YjEtNjgwODAxYWY1YTJiIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoib255eGlhIiwibm9uY2UiOiIzNTQzNjYzZS1lMDQ4LTQ2MmItOGZjYy1mODU0MDYxYmM3ZjEiLCJzZXNzaW9uX3N0YXRlIjoiZWY1YTI3OGUtOTA4OS00YTE3LWExZjItZDgzOTFjNGVkOTE2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJBdGxhc19yb2xlX2FkbWluIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJuYW1lIjoiUGVuZ2ZlaSBMaXUiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJwZW5nZmVpIiwiZ2l2ZW5fbmFtZSI6IlBlbmdmZWkiLCJmYW1pbHlfbmFtZSI6IkxpdSIsImVtYWlsIjoibGl1LnBlbmdmZWlAaG90bWFpbC5mciJ9.PZDv1gVFGhDxYbOoR6ac_1OXRfwxAmJlWBLn2t6rSvmWveh1gepExgi5aamSjNC0V8Oj9uUTvFl7h-8-yHQe57lf1HMmytXnWa3o9glCP99PC3cy83tZfYqX9mxOQSDfWNHBJLl5cm1KpP3IgwtP4S9uan9q2o-oQhU93T2LNcdgD4FvbnpfEElU3jjyQbhsFkCCvu2cc988cZmx45YJDMe-SKOrYKyCEi965sAq-dC2I1v-9GprcM5EfgH1c3hbA8lfPxZymo9C5pN8vsn3n4-gSvOieNUDveFHTnT9zQGY9a2pj_xrERErBi7oV1zK5_z1j_vGjS63O0pbcyofgg"

finder = EntityFinder(atlas_hostname, atlas_port, oidc_token=oidc_token)
finder.search_by_attribute("aws_s3_bucket", "owner", "foobar")

search_result = finder.search_full_text("aws_s3_bucket", "pengfei")

EntityFinder.show_search_results(search_result)
entity_number = EntityFinder.get_entity_number(search_result)
print("Find " + str(entity_number) + " result in total")

guid_list = EntityFinder.get_result_entity_guid_list(search_result)

for guid in guid_list:
    print("result:" + guid)
